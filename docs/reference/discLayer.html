<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Discontinuities Layer — discLayer • cartography</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Discontinuities Layer — discLayer"><meta property="og:description" content="This function computes and plots spatial discontinuities. The 
discontinuities are plotted over the layer outputted by the getBorders function.
The line widths reflect the ratio or the difference between values of an indicator 
in two neighbouring units."><meta property="og:image" content="/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">cartography</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">3.1.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../articles/cartography.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/cheatsheet.html">Thematic Maps with cartography :: CHEAT SHEET</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/riatelab/cartography/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Discontinuities Layer</h1>
    <small class="dont-index">Source: <a href="https://github.com/riatelab/cartography/blob/HEAD/R/discLayer.R" class="external-link"><code>R/discLayer.R</code></a></small>
    <div class="hidden name"><code>discLayer.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function computes and plots spatial discontinuities. The 
discontinuities are plotted over the layer outputted by the <a href="getBorders.html">getBorders</a> function.
The line widths reflect the ratio or the difference between values of an indicator 
in two neighbouring units.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">discLayer</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  <span class="va">df</span>,</span>
<span>  dfid <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">var</span>,</span>
<span>  method <span class="op">=</span> <span class="st">"quantile"</span>,</span>
<span>  nclass <span class="op">=</span> <span class="fl">4</span>,</span>
<span>  threshold <span class="op">=</span> <span class="fl">0.75</span>,</span>
<span>  type <span class="op">=</span> <span class="st">"rel"</span>,</span>
<span>  sizemin <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  sizemax <span class="op">=</span> <span class="fl">10</span>,</span>
<span>  col <span class="op">=</span> <span class="st">"red"</span>,</span>
<span>  legend.pos <span class="op">=</span> <span class="st">"bottomleft"</span>,</span>
<span>  legend.title.txt <span class="op">=</span> <span class="st">"legend title"</span>,</span>
<span>  legend.title.cex <span class="op">=</span> <span class="fl">0.8</span>,</span>
<span>  legend.values.cex <span class="op">=</span> <span class="fl">0.6</span>,</span>
<span>  legend.values.rnd <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  legend.frame <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  add <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>x</dt>
<dd><p>an sf object, a simple feature collection, as outputted by the <a href="getBorders.html">getBorders</a> function.</p></dd>


<dt>df</dt>
<dd><p>a data frame that contains the values used to compute and plot discontinuities.</p></dd>


<dt>dfid</dt>
<dd><p>name of the identifier variable in df, default to the first column 
of df. (optional)</p></dd>


<dt>var</dt>
<dd><p>name of the numeric variable used to compute and plot discontinuities.</p></dd>


<dt>method</dt>
<dd><p>a classification method; one of "sd", "equal", "quantile", "fisher-jenks","
q6", "geom", "arith", "em" or "msd" (see <a href="getBreaks.html">getBreaks</a>).</p></dd>


<dt>nclass</dt>
<dd><p>a targeted number of classes. If null, the number of 
class is automatically defined (see <a href="getBreaks.html">getBreaks</a>).</p></dd>


<dt>threshold</dt>
<dd><p>share of represented borders, value between 0 
(nothing) and 1 (all the discontinuities).</p></dd>


<dt>type</dt>
<dd><p>type of discontinuity measure, one of "rel" or "abs" (see Details).</p></dd>


<dt>sizemin</dt>
<dd><p>thickness of the smallest line.</p></dd>


<dt>sizemax</dt>
<dd><p>thickness of the biggest line.</p></dd>


<dt>col</dt>
<dd><p>color of the discontinuities lines.</p></dd>


<dt>legend.pos</dt>
<dd><p>position of the legend, one of "topleft", "top", 
"topright", "right", "bottomright", "bottom", "bottomleft", "left" or a 
vector of two coordinates in map units (c(x, y)). If 
legend.pos is "n" then the legend is not plotted.</p></dd>


<dt>legend.title.txt</dt>
<dd><p>title of the legend.</p></dd>


<dt>legend.title.cex</dt>
<dd><p>size of the legend title.</p></dd>


<dt>legend.values.cex</dt>
<dd><p>size of the values in the legend.</p></dd>


<dt>legend.values.rnd</dt>
<dd><p>number of decimal places of the values in 
the legend.</p></dd>


<dt>legend.frame</dt>
<dd><p>whether to add a frame to the legend (TRUE) or 
not (FALSE).</p></dd>


<dt>add</dt>
<dd><p>whether to add the layer to an existing plot (TRUE) or 
not (FALSE).</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>An <a href="https://rdrr.io/r/base/invisible.html" class="external-link">invisible</a> sf object (MULTISTRING) with the discontinuity measures is returned.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>The "rel" type of discontinuity is the result of pmax(value unit 1 / value unit 2, value unit 2 / value unit 1).<br>
The "abs" type of discontinuity is the result of pmax(value unit 1 - value unit 2, value unit 2 - value unit 1).</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><a href="getBorders.html">getBorders</a>, <a href="gradLinkLayer.html">gradLinkLayer</a>, <a href="legendGradLines.html">legendGradLines</a></p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/" class="external-link">sf</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">mtq</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_read.html" class="external-link">st_read</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"gpkg/mtq.gpkg"</span>, package<span class="op">=</span><span class="st">"cartography"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Reading layer `mtq' from data source </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   `/tmp/RtmpmpfIrO/temp_libpath18ee15f22a9e/cartography/gpkg/mtq.gpkg' </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   using driver `GPKG'</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Simple feature collection with 34 features and 7 fields</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Geometry type: MULTIPOLYGON</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Dimension:     XY</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Bounding box:  xmin: 690574 ymin: 1592536 xmax: 735940.2 ymax: 1645660</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Projected CRS: WGS 84 / UTM zone 20N</span>
<span class="r-in"><span><span class="co"># Get borders</span></span></span>
<span class="r-in"><span><span class="va">mtq.borders</span> <span class="op">&lt;-</span> <span class="fu"><a href="getBorders.html">getBorders</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">mtq</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># Median Income </span></span></span>
<span class="r-in"><span><span class="fu"><a href="choroLayer.html">choroLayer</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">mtq</span>, var <span class="op">=</span> <span class="st">"MED"</span>, border <span class="op">=</span> <span class="st">"grey"</span>, lwd <span class="op">=</span> <span class="fl">0.5</span>, </span></span>
<span class="r-in"><span>           method <span class="op">=</span> <span class="st">'equal'</span>, nclass <span class="op">=</span> <span class="fl">6</span>, legend.pos <span class="op">=</span> <span class="st">"topleft"</span>,</span></span>
<span class="r-in"><span>           legend.title.txt <span class="op">=</span> <span class="st">"Median Income\n(in euros)"</span> <span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># Discontinuities</span></span></span>
<span class="r-in"><span><span class="fu">discLayer</span><span class="op">(</span>x <span class="op">=</span> <span class="va">mtq.borders</span>, df <span class="op">=</span> <span class="va">mtq</span>,</span></span>
<span class="r-in"><span>          var <span class="op">=</span> <span class="st">"MED"</span>, col<span class="op">=</span><span class="st">"red4"</span>, nclass<span class="op">=</span><span class="fl">3</span>,</span></span>
<span class="r-in"><span>          method<span class="op">=</span><span class="st">"equal"</span>, threshold <span class="op">=</span> <span class="fl">0.4</span>, sizemin <span class="op">=</span> <span class="fl">0.5</span>,</span></span>
<span class="r-in"><span>          sizemax <span class="op">=</span> <span class="fl">10</span>, type <span class="op">=</span> <span class="st">"abs"</span>,legend.values.rnd <span class="op">=</span> <span class="fl">0</span>,</span></span>
<span class="r-in"><span>          legend.title.txt <span class="op">=</span> <span class="st">"Discontinuities\n(absolute difference)"</span>,</span></span>
<span class="r-in"><span>          legend.pos <span class="op">=</span> <span class="st">"bottomleft"</span>, add<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="discLayer-1.png" alt="" width="525" height="504"></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Timothée Giraud, Nicolas Lambert.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

